@model IEnumerable<PhoneStore.Domain.Entities.Phone>

<link rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

<style>
    body {
        background: linear-gradient(120deg, #f8fafc, #eef2ff);
        font-family: 'Segoe UI', system-ui, sans-serif;
    }

    /* HOME ICON */
    .home-icon {
        position: fixed;
        top: 22px;
        left: 22px;
        width: 48px;
        height: 48px;
        background: white;
        border-radius: 50%;
        box-shadow: 0 15px 35px rgba(0,0,0,.18);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 9999;
        transition: .25s;
        text-decoration: none;
    }

        .home-icon i {
            font-size: 22px;
            color: #6366f1;
        }

        .home-icon:hover {
            background: #6366f1;
        }

            .home-icon:hover i {
                color: white;
            }

    /* HERO */
    .hero {
        padding: 90px 0;
        background: linear-gradient(135deg, #6366f1, #7c3aed);
        border-radius: 0 0 60px 60px;
        color: white;
        margin-bottom: 60px;
        text-align: center;
    }

        .hero h1 {
            font-size: 3rem;
            font-weight: 900;
        }

        .hero span {
            color: #fde047
        }

    .hero-search {
        max-width: 420px;
        margin: 30px auto;
        display: flex;
        background: white;
        border-radius: 16px;
        overflow: hidden;
    }

        .hero-search input {
            flex: 1;
            padding: 14px;
            border: none;
            outline: none;
        }

        .hero-search button {
            border: none;
            padding: 0 20px;
            background: #6366f1;
            color: white;
        }

    /* CARD */
    .phone-card {
        background: white;
        border-radius: 22px;
        padding: 18px;
        box-shadow: 0 25px 40px rgba(0,0,0,.08);
        transition: .3s;
        position: relative;
        height: 100%;
    }

        .phone-card:hover {
            transform: translateY(-8px);
        }

    .icons {
        position: absolute;
        top: 15px;
        right: 15px;
        display: flex;
        gap: 6px;
        z-index: 2;
    }

        .icons i {
            width: 34px;
            height: 34px;
            border-radius: 50%;
            background: #f1f5f9;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: .2s;
        }

            .icons i:hover {
                background: #6366f1;
                color: white;
            }

    .phone-img {
        text-align: center;
        margin: 20px 0;
    }

        .phone-img img {
            height: 180px;
            object-fit: contain;
        }

    .price {
        color: #6366f1;
        font-size: 22px;
        font-weight: 800;
    }

    .old {
        font-size: 12px;
        text-decoration: line-through;
        color: #94a3b8;
    }

    .btn-cart {
        width: 100%;
        border: none;
        background: #6366f1;
        color: white;
        padding: 12px;
        border-radius: 14px;
        margin-top: 15px;
    }
</style>

<!-- HOME ICON -->
<a href="/" class="home-icon" title="Asosiy sahifa">
    <i class="bi bi-house-fill"></i>
</a>

<!-- HERO -->
<section class="hero">
    <h1>Top <span>Smartfonlar</span></h1>
    <p>Eng yangi va zo‘r telefonlar</p>

    <div class="hero-search">
        <input type="text" id="searchInput" placeholder="Telefon qidirish...">
        <button><i class="bi bi-search"></i></button>
    </div>
</section>

<!-- PHONES -->
<div class="container">
    <div class="row g-4" id="phoneList">

        @foreach (var phone in Model)
        {
            <div class="col-sm-6 col-md-4 col-lg-3 phone-item">

                <div class="phone-card"
                     data-name="@phone.Name"
                     data-price="@phone.Price"
                     data-img="@phone.ImageUrl">

                    <div class="icons">
                        <i class="bi bi-heart fav-btn" title="Sevimlilar"></i>
                        <i class="bi bi-eye view-btn"
                           title="Batafsil"
                           data-bs-toggle="modal"
                           data-bs-target="#detailsModal"></i>
                    </div>

                    <div class="phone-img">
                        <img src="@phone.ImageUrl" alt="@phone.Name">
                    </div>

                    <h6 class="mt-2">@phone.Name</h6>

                    <div class="d-flex gap-2 align-items-center">
                        <div class="price">$@phone.Price</div>
                        <div class="old">$@(phone.Price + 150)</div>
                    </div>

                    <button class="btn-cart cart-btn"
                            data-bs-toggle="modal"
                            data-bs-target="#cartModal">
                        <i class="bi bi-cart3"></i> Savatchaga
                    </button>
                </div>
            </div>
        }

    </div>
</div>

<!-- DETAILS MODAL -->
<div class="modal fade" id="detailsModal">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content rounded-4">
            <div class="modal-header">
                <h5 id="modalTitle"></h5>
                <button class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body row">
                <div class="col-md-5 text-center">
                    <img id="modalImg" class="img-fluid">
                </div>
                <div class="col-md-7">
                    <h3 id="modalPrice" class="text-primary"></h3>
                    <p>8/256 GB · 5G · AMOLED</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- CART MODAL -->
<div class="modal fade" id="cartModal">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content rounded-4">
            <div class="modal-header">
                <h5>🛒 Savatcha</h5>
                <button class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body" id="cartItems"></div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
    const cart = [];

    document.querySelectorAll(".view-btn").forEach(btn => {
        btn.onclick = () => {
            const c = btn.closest(".phone-card");
            modalTitle.innerText = c.dataset.name;
            modalPrice.innerText = "$" + c.dataset.price;
            modalImg.src = c.dataset.img;
        }
    });

    document.querySelectorAll(".cart-btn").forEach(btn => {
        btn.onclick = () => {
            const c = btn.closest(".phone-card");
            cart.push({ name: c.dataset.name, price: c.dataset.price });
            cartItems.innerHTML = cart.map(x =>
                `<div class="d-flex justify-content-between border-bottom py-2">
                    <span>${x.name}</span><b>$${x.price}</b>
                </div>`
            ).join("");
        }
    });

    document.querySelectorAll(".fav-btn").forEach(b => {
        b.onclick = () => b.classList.toggle("text-danger");
    });

    searchInput.onkeyup = () => {
        const v = searchInput.value.toLowerCase();
        document.querySelectorAll(".phone-item").forEach(c => {
            c.style.display = c.innerText.toLowerCase().includes(v) ? "" : "none";
        });
    }
</script>
